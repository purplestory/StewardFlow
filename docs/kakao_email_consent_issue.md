# 카카오 이메일 동의 항목 "권한 없음" 해결 가이드

## 문제: 카카오계정(이메일) 항목이 "권한 없음"으로 표시됨

카카오에서는 이메일 정보를 민감한 정보로 분류하여, 기본적으로 제공되지 않거나 추가 설정이 필요할 수 있습니다.

## 해결 방법

### 방법 1: 앱 상태 확인 및 변경

카카오 이메일 동의 항목은 **앱이 "서비스 중" 상태**일 때만 사용할 수 있습니다.

1. **카카오 개발자 센터** → **"내 애플리케이션"** → **"스튜어드 플로우"** 선택
2. 앱 상태 확인:
   - **"앱 설정"** → **"앱 상태"** 또는 메인 화면에서 확인
   - 상태가 "개발 중"이면 "서비스 중"으로 변경 필요

3. **앱 상태를 "서비스 중"으로 변경**:
   - "앱 설정" → "앱 상태" 메뉴
   - "서비스 중" 선택
   - 저장

> ⚠️ **주의**: 앱 상태를 "서비스 중"으로 변경하면 실제 사용자에게 서비스가 공개됩니다.

### 방법 2: 이메일 동의 항목 없이 진행 (권장)

Supabase는 이메일이 없어도 카카오 로그인이 가능합니다. 카카오 계정 ID를 사용하여 사용자를 식별할 수 있습니다.

#### 현재 코드 확인
현재 `AuthCard.tsx`에서 이미 이메일이 없는 경우를 처리하고 있습니다:

```typescript
const userEmail = user.email || user.user_metadata?.email || "";
```

#### 해결책
1. **이메일 동의 항목은 건너뛰기**
   - `account_email`은 활성화하지 않아도 됩니다
   - `profile_nickname`과 `profile_image`만 활성화

2. **사용자 식별**
   - 카카오 계정 ID로 사용자 식별
   - 이메일이 없어도 로그인 가능

### 방법 3: 비즈앱 전환 및 심사 (이메일이 필요한 경우)

카카오 이메일 동의 항목을 사용하려면 **비즈앱으로 전환하고 카카오의 심사를 받아야** 합니다.

#### 비즈앱 전환 절차

1. **카카오 개발자 센터** → **"내 애플리케이션"** → **"스튜어드 플로우"** 선택
2. **"앱 설정"** → **"앱 전환"** 또는 **"비즈앱 전환"** 메뉴 찾기
3. **비즈앱 전환 신청**:
   - 사업자 정보 입력
   - 앱 용도 및 필요성 설명
   - 이메일 동의 항목 사용 목적 설명
4. **심사 제출** 및 **심사 대기** (보통 1-2주 소요)
5. **심사 승인 후** 이메일 동의 항목 활성화 가능

#### 비즈앱 전환 필요 서류
- 사업자등록증
- 앱 서비스 설명서
- 개인정보 처리방침
- 이용약관

> ⚠️ **주의**: 비즈앱 전환은 심사가 필요하며 시간이 걸립니다. 급하게 필요한 경우 이메일 없이 진행하는 것을 권장합니다.

## 권장 해결 방법

### ✅ 이메일 없이 진행 (가장 빠른 방법)

1. **동의 항목 설정**:
   - ✅ **닉네임** (`profile_nickname`) - 활성화: ON
   - ✅ **프로필 사진** (`profile_image`) - 활성화: ON
   - ❌ **카카오계정(이메일)** (`account_email`) - 건너뛰기

2. **코드 확인**:
   - 현재 코드는 이미 이메일이 없는 경우를 처리합니다
   - 추가 수정 불필요

3. **테스트**:
   - 카카오 로그인 시도
   - 이메일 없이도 로그인 가능한지 확인

## Supabase 설정 조정 (선택)

이메일이 필수가 아닌 경우, Supabase에서도 이메일을 필수로 요청하지 않도록 설정할 수 있습니다.

하지만 기본적으로 Supabase는 이메일이 없어도 카카오 로그인이 가능합니다.

## 체크리스트

### 이메일 없이 진행하는 경우
- [ ] "닉네임" 동의 항목 활성화: ON
- [ ] "프로필 사진" 동의 항목 활성화: ON
- [ ] "카카오계정(이메일)"은 건너뛰기
- [ ] 저장
- [ ] 카카오 로그인 테스트

### 이메일이 필요한 경우
- [ ] 앱 상태를 "서비스 중"으로 변경
- [ ] 카카오 고객센터에 이메일 동의 항목 활성화 요청
- [ ] 승인 대기
- [ ] 승인 후 이메일 동의 항목 활성화

## 현재 코드 상태

현재 구현된 코드는 이미 이메일이 없는 경우를 처리합니다:

```typescript
// AuthCard.tsx에서
const userEmail = user.email || user.user_metadata?.email || "";
```

따라서 **이메일 동의 항목 없이도 카카오 로그인이 가능**합니다.

## 결론

### ✅ 권장: 이메일 동의 항목 없이 진행
- 닉네임과 프로필 사진만 활성화
- 이메일 없이도 로그인 가능
- 추가 설정 불필요
- 즉시 사용 가능

### 🔄 대안: 이메일이 반드시 필요한 경우
- 비즈앱 전환 신청
- 카카오 심사 대기 (1-2주 소요)
- 심사 승인 후 이메일 동의 항목 활성화

## 추천 사항

**현재 상황에서는 이메일 없이 진행하는 것을 강력히 권장합니다:**

1. ✅ **즉시 사용 가능**: 추가 심사 없이 바로 사용
2. ✅ **코드 호환**: 현재 코드가 이미 이메일 없이 작동하도록 구현됨
3. ✅ **기능 완전**: 이메일 없이도 모든 기능 사용 가능
4. ✅ **나중에 추가 가능**: 필요시 나중에 비즈앱 전환 후 이메일 추가 가능

**비즈앱 전환은 다음 경우에만 고려:**
- 이메일이 반드시 필요한 특별한 기능이 있는 경우
- 장기적으로 이메일 기반 기능을 확장할 계획인 경우
- 심사 대기 시간(1-2주)이 문제되지 않는 경우
