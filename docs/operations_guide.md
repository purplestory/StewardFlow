# 운영 가이드 (1차)

본 문서는 1차 운영에 필요한 핵심 운영 항목을 요약합니다. 세부 기능은 실제 테스트를 통해 보완합니다.

## 1. 필수 환경 설정
- `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY` 설정
- `supabase/schema.sql` 실행으로 테이블 생성
- `supabase/rls.sql` 실행으로 RLS 정책 적용
- `supabase/migrations/`의 SQL은 기존 환경에 순차 반영

## 2. 조직/권한 운영
- 조직 생성/가입은 `조직 설정` 페이지에서 수행
- 역할 체계: `admin` / `manager` / `user`
- 사용자 권한 변경 및 초대 관리: `설정 > 사용자 관리`
- 감사 로그 조회: `설정 > 감사 로그` (관리자/부서관리자만)

## 3. 초대 운영
- 초대 발송은 관리자/부서관리자만 가능
- 초대는 기본 7일 후 만료 처리
- 초대 수락 시 자동으로 조직/역할 연결
- 초대 목록에서 재전송/취소 가능

## 4. 자산/공간 운영
- 자산/공간 등록 시 `owner_scope`에 따라 승인 권한 판단
- 승인 정책은 `설정 > 승인 정책`에서 관리
- 대여/예약 상태 변경은 API 경유(서버측)로 처리

## 5. 알림 운영
- 예약/승인/반납에 대해 알림 레코드 생성
- Kakao 알림톡 연동은 `notifications` 테이블 기반으로 확장
- 알림 화면과 배지는 실시간 업데이트

## 6. 감사 로그
- 권한 변경, 초대 발송/수락/재전송/취소 기록
- 감사 로그는 최근 100건 기본 조회
- 담당자/날짜/행동 필터 및 검색 지원

## 7. 점검 체크리스트
- RLS 활성화 여부 확인
- 조직/부서 권한 분리 정상 동작 확인
- 초대 만료 처리 확인
- 예약 승인 권한 정책 적용 확인

## 8. 1차 운영 절차 (권장)
- 조직 생성 → 관리자/부서관리자 지정
- 승인 정책 등록(조직/부서별 권한 설정)
- 자산/공간 등록 → 예약 테스트 → 승인/반납 흐름 테스트
- 알림/감사 로그 확인으로 운영 히스토리 검증

## 9. 주간 점검 (권장)
- 초대 목록 정리(만료/취소 확인)
- 승인 정책 변경 사항 확인
- 감사 로그에서 권한 변경 이력 확인
